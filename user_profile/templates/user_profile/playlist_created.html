{% extends "base.html" %}
{% load static %}
{% load cloudinary %}


{% block title %}FanHub Playlist Manager{% endblock %}

{% block extra_head %}
<!-- Custom CSS for user_profile application -->
<link rel="stylesheet" href="{% static 'user_profile/css/playlist_update.css' %}" />
{% endblock extra_head %}

{% block main_content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<div class="container flex">
    <section class="featured-image">
        <h4>Playlist Image:</h4> 
        <div class="image-container">
        {% if playlist.featured_image %}
            {% cloudinary playlist.featured_image %} 
        {% else %}
            <img src="{% static 'images/hero_banner_slipknot.png' %}" alt="default featured image">
        </div>
        <div class="caption">
            <p>No Custom Image Was Uploaded!</p>
            <p>If you decide to share this playlist this nice default banner will be attached.</p>
        </div>
        {% endif %}
    </section>
    <section class="playlist-card">
        <div class="playlist-title">
            <h4>Playlist Title:</h4>
            <p>{{ playlist.title }}</p>
        </div>
        <div class="playlist-description">
            <h4>Playlist Description:</h4>
            <p>{{ playlist.description | safe }}</p>
        </div>
        <div class="playlist-url">
            <h4>Playlist Reference:</h4> 
            {% if playlist.reference_url %}  
            <a href="{{ playlist.reference_url }}" target="_blank" rel="noopener noreferrer">{{ playlist.reference_url }}</a>
            {% else %}
                <p>No URL Uploaded</p>    
            {% endif %}
        </div>
    </section>
    <section class="navigation flex-column-left">
            <div>
                <a href="{% url 'playlist_update' playlist.id %}" class="navigation-btn">Edit Playlist Details and Image</a>
            </div>
            <div>
                <a href="{% url 'playlist_delete' playlist.id %}" class="navigation-btn del-btn">Delete Playlist</a>
            </div>
            <div>
                <a href="{% url 'playlist_create' %}" class="navigation-btn"><strong>Create New Playlist</strong></a>
            </div>
            <div>
                <a href="{% url 'profile' %}" class="navigation-btn">Back to Your Profile Page</a>
            </div>
    </section>
    <section class="playlist-card">
        <h2>Playlist Items</h2>
        <div>
            <a href="{% url 'add_playlist_item' playlist_id=playlist.id %}" class="navigation-btn"><span id="treble-sign-html">&#x1D11E;</span>&nbsp;&nbsp;&nbsp;Add Items to Your Playlist</a>
        </div>
        <p>OR</p>
        <p>Click to Edit or Delete Your Playlist Items:</p>
        {% if playlist_items %}
            <ul>
                {% for item in playlist_items %}
                    <li>
                        <a href="{% url 'playlist_item_update' playlist_id=playlist.id pk=item.id %}">{{ item }}</a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No Playlist Items Yet</p>
        {% endif %}

    </section>
</div>

{% endblock %}